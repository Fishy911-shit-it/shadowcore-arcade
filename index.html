<!DOCTYPE html>
<html>

<head>

<title>Smart AI Snake</title>

<style>

body{
background:#111;
color:white;
text-align:center;
font-family:Arial;
}

canvas{
background:black;
display:block;
margin:auto;
}

button{
padding:10px;
margin:10px;
}

</style>

</head>

<body>

<h2>Smart AI Snake</h2>

Score:
<span id="score">0</span>

<br>

<button onclick="toggleAI()">
Toggle Smart AI
</button>

<canvas
id="game"
width="500"
height="500">
</canvas>

<script>

const canvas=
document.getElementById("game");

const c=
canvas.getContext("2d");

let grid=20;

let size=25;

let snake=[

{x:12,y:12}

];

let dir={x:1,y:0};

let food=randomFood();

let score=0;

let ai=true;



function toggleAI(){

ai=!ai;

}



/* FOOD */

function randomFood(){

return{

x:Math.floor(Math.random()*size),

y:Math.floor(Math.random()*size)

};

}



/* PLAYER */

document.onkeydown=function(e){

if(ai)return;

if(e.key=="ArrowUp")
dir={x:0,y:-1};

if(e.key=="ArrowDown")
dir={x:0,y:1};

if(e.key=="ArrowLeft")
dir={x:-1,y:0};

if(e.key=="ArrowRight")
dir={x:1,y:0};

};



/* SAFE CHECK */

function safe(x,y){

if(
x<0||
y<0||
x>=size||
y>=size
)return false;

for(let s of snake){

if(s.x==x&&s.y==y)
return false;

}

return true;

}



/* SMART AI */

function aiMove(){

let head=snake[0];

let options=[

{x:1,y:0},
{x:-1,y:0},
{x:0,y:1},
{x:0,y:-1}

];

let best=null;

let bestScore=9999;



options.forEach(o=>{

let nx=head.x+o.x;
let ny=head.y+o.y;

if(!safe(nx,ny))
return;

let dist=

Math.abs(food.x-nx)+
Math.abs(food.y-ny);


/* Prefer safe paths */

let spaceScore=0;

options.forEach(o2=>{

if(safe(
nx+o2.x,
ny+o2.y))
spaceScore++;

});

let total=
dist-spaceScore*2;

if(total<bestScore){

bestScore=total;
best=o;

}

});


if(best)
dir=best;

}



/* UPDATE */

function update(){

if(ai)
aiMove();


let head={

x:snake[0].x+dir.x,

y:snake[0].y+dir.y

};


if(!safe(head.x,head.y)){

gameOver();
return;

}


snake.unshift(head);


if(
head.x==food.x&&
head.y==food.y
){

score++;

food=randomFood();

}

else{

snake.pop();

}


document.getElementById("score")
textContent=score;


}



/* DRAW */

function draw(){

c.fillStyle="black";
c.fillRect(0,0,500,500);


/* FOOD */

c.fillStyle="red";

c.fillRect(

food.x*grid,
food.y*grid,
grid,
grid

);


/* SNAKE */

c.fillStyle="lime";

snake.forEach(s=>{

c.fillRect(

s.x*grid,
s.y*grid,
grid,
grid

);

});


}



/* GAME OVER */

function gameOver(){

alert("Game Over");

location.reload();

}



/* LOOP */

setInterval(function(){

update();
draw();

},80);

</script>

</body>

</html>
